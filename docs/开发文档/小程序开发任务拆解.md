# AI营养师小程序开发任务拆解

## 文档说明
本文档基于当前小程序所有页面的功能模块，进行开发任务的详细拆解，便于团队协作和进度管理。

**文档创建时间**: 2025-01-06  
**项目路径**: `/src/pages/`

---

## 一、用户认证模块

### 1.1 登录页面 (login.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 微信一键登录功能
- [x] 用户协议和隐私政策确认
- [x] 新老用户识别与跳转逻辑
- [x] 登录状态管理（localStorage）
- [x] 登录加载状态展示

#### 待优化项
- [ ] 接入真实微信授权API
- [ ] 错误处理和重试机制
- [ ] 登录状态持久化优化

---

## 二、首页模块

### 2.1 今日首页 (home.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 数据指标展示（剩余卡路里、体重）
- [x] 主动健康评分（环形进度图）
  - [x] 四个维度详情（可折叠）
  - [x] 表情化评分展示
  - [x] 评分等级颜色区分
- [x] T型餐盘结构展示
  - [x] 蔬菜摄入（主卡片）
  - [x] 主食和蛋白质（子卡片）
  - [x] 进度条动画
  - [x] 连接线动画效果
- [x] 数据持久化（localStorage）

#### 待开发项
- [ ] 接入后端API获取实时数据
- [ ] 数据刷新机制
- [ ] 数据异常处理
- [ ] 分享功能

---

## 三、计划追踪模块

### 3.1 计划页面 (plan.html)
**优先级**: P1  
**状态**: ✅ 已完成

#### 功能清单
- [x] 平均评分趋势图（近7天）
- [x] 时间切换（本周/本月）
- [x] 微量元素缺口分析
  - [x] 柱状图展示
  - [x] 达标率计算
  - [x] 详情弹窗
  - [x] 补充建议展示
- [x] 补剂计划管理
  - [x] 补剂列表展示
  - [x] 添加补剂功能
  - [x] 删除补剂功能

#### 待开发项
- [ ] 趋势图数据接入后端
- [ ] 补剂数据持久化
- [ ] 补剂详情编辑功能
- [ ] 补剂服用提醒集成

---

## 四、百科中心模块

### 4.1 百科首页 (wiki.html)
**优先级**: P1  
**状态**: ✅ 已完成

#### 功能清单
- [x] 搜索功能（UI）
- [x] 抗炎饮食入门课入口
- [x] 抗炎红黑榜展示
- [x] 明星补剂列表
- [x] 补剂详情页跳转

#### 待开发项
- [ ] 搜索功能实现
- [ ] 抗炎饮食课程内容
- [ ] 红黑榜详细数据
- [ ] 补剂数据管理后台

### 4.2 补剂详情页 (supplement-detail.html)
**优先级**: P1  
**状态**: ✅ 已完成

#### 功能清单
- [x] 补剂信息展示
- [x] 核心功效列表
- [x] 适用人群标签
- [x] 主要成分展示
- [x] 使用建议
- [x] 购买入口（UI）

#### 待开发项
- [ ] 补剂数据管理
- [ ] 购买功能接入
- [ ] 用户补剂收藏功能
- [ ] 相关补剂推荐

---

## 五、个人中心模块

### 5.1 个人中心 (profile.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 用户信息展示
- [x] 打卡统计卡片
- [x] 健康分改变展示
- [x] 菜单导航
  - [x] 我的营养师
  - [x] 我的报告
  - [x] 健康档案
  - [x] 服务偏好设置
- [x] 退出登录功能
- [x] 确认对话框

#### 待开发项
- [ ] 用户头像上传
- [ ] 会员信息管理
- [ ] 营养师绑定功能
- [ ] 帮助与反馈功能实现

---

## 六、健康档案模块

### 6.1 健康档案页面 (health-profile.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 基本信息展示（年龄、性别、身高、体重）
- [x] 目标偏好展示
- [x] 生活方式展示
- [x] 饮食习惯展示
- [x] 编辑功能
  - [x] 单字段编辑
  - [x] 批量编辑模式
  - [x] 选项选择器
- [x] 空状态提示
- [x] 数据持久化

#### 待开发项
- [ ] 数据验证规则
- [ ] 数据同步到后端
- [ ] 编辑历史记录
- [ ] 数据导出功能

---

## 七、问卷模块

### 7.1 问卷页面 (questionnaire.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 问卷封面
  - [x] 问卷说明
  - [x] 开始答题按钮
- [x] 多步骤问卷填写
  - [x] 进度条显示
  - [x] 题目分类（基本信息、目标偏好、生活方式、饮食习惯）
  - [x] 选项选择
  - [x] 返回上一题
- [x] 答案保存（localStorage）
- [x] 跳转到计算页面

#### 待开发项
- [ ] 问卷数据提交到后端
- [ ] 问卷答案验证
- [ ] 问卷进度保存（可中断续答）
- [ ] 问卷结果预览

---

## 八、方案生成模块

### 8.1 计算页面 (calculating.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 方案生成进度展示
- [x] 食物图片轮播
- [x] 进度条动画
- [x] 提示文案切换
- [x] 自动跳转到报告页

#### 待开发项
- [ ] 接入真实AI分析接口
- [ ] 生成失败处理
- [ ] 生成进度实时更新
- [ ] 生成结果缓存

---

## 九、报告模块

### 9.1 报告列表页 (reports.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 最新报告展示
- [x] 历史报告列表
- [x] 报告卡片信息展示
- [x] 空状态提示
- [x] 报告详情跳转

#### 待开发项
- [ ] 报告数据从后端获取
- [ ] 报告筛选和排序
- [ ] 报告分享功能
- [ ] 报告导出功能

### 9.2 报告详情页 (report.html)
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 问候卡片
- [x] 健康评分展示
- [x] 报告内容展示
- [x] 分享功能（UI）

#### 待开发项
- [ ] 报告数据动态渲染
- [ ] 报告分享功能实现
- [ ] 报告打印功能
- [ ] 报告数据可视化优化

### 9.3 详细报告页 (report-detail.html)
**优先级**: P1  
**状态**: ✅ 已完成

#### 功能清单
- [x] BMI分析展示
- [x] 详细数据展示
- [x] 图表展示

#### 待开发项
- [ ] 数据动态渲染
- [ ] 图表交互优化
- [ ] 数据对比功能

---

## 十、设置模块

### 10.1 服务偏好设置 (service-preferences.html)
**优先级**: P1  
**状态**: ✅ 已完成

#### 功能清单
- [x] 打卡提醒设置
  - [x] 体重打卡提醒开关
  - [x] 提醒时间设置
- [x] 饮食提醒设置
  - [x] 喝水提醒开关
  - [x] 三餐提醒开关
  - [x] 三餐时间设置
- [x] 运动与补剂提醒设置
  - [x] 运动提醒开关
  - [x] 运动提醒时间设置
  - [x] 补剂服用提醒开关
- [x] 设置保存功能
- [x] 设置持久化

#### 待开发项
- [ ] 提醒功能接入系统通知
- [ ] 时间选择器优化
- [ ] 设置同步到后端
- [ ] 提醒规则验证

---

## 十一、通用功能模块

### 11.1 底部导航栏
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 四个主要Tab（今日、计划、百科、我的）
- [x] 导航状态管理
- [x] 页面跳转

#### 待优化项
- [ ] 导航栏性能优化
- [ ] 导航栏动画优化

### 11.2 状态栏
**优先级**: P1  
**状态**: ✅ 已完成

#### 功能清单
- [x] 时间显示
- [x] 信号图标
- [x] WiFi图标
- [x] 电池图标

#### 待优化项
- [ ] 真实状态数据获取（如需要）

### 11.3 返回按钮
**优先级**: P0  
**状态**: ✅ 已完成

#### 功能清单
- [x] 统一返回按钮样式
- [x] 返回功能实现

---

## 十二、数据管理模块

### 12.1 本地存储管理
**优先级**: P0  
**状态**: ✅ 部分完成

#### 功能清单
- [x] 问卷答案存储（localStorage）
- [x] 健康档案数据存储
- [x] 服务偏好设置存储
- [x] 用户登录状态存储

#### 待开发项
- [ ] 数据加密存储
- [ ] 数据同步机制
- [ ] 数据备份和恢复
- [ ] 数据清理策略

### 12.2 后端API集成
**优先级**: P0  
**状态**: ❌ 未开始

#### 待开发项
- [ ] 用户认证API
- [ ] 问卷提交API
- [ ] 健康数据获取API
- [ ] 报告生成API
- [ ] 设置同步API
- [ ] 错误处理和重试机制
- [ ] 请求拦截器
- [ ] 响应数据格式化

---

## 十三、性能优化模块

### 13.1 页面性能优化
**优先级**: P1  
**状态**: ❌ 未开始

#### 待开发项
- [ ] 图片懒加载
- [ ] 代码分割
- [ ] 资源压缩
- [ ] 缓存策略优化
- [ ] 首屏加载优化

### 13.2 用户体验优化
**优先级**: P1  
**状态**: ❌ 未开始

#### 待开发项
- [ ] 加载状态优化
- [ ] 错误提示优化
- [ ] 操作反馈优化
- [ ] 动画性能优化
- [ ] 页面切换动画

---

## 十四、测试模块

### 14.1 功能测试
**优先级**: P1  
**状态**: ❌ 未开始

#### 待开发项
- [ ] 单元测试
- [ ] 集成测试
- [ ] 端到端测试
- [ ] 兼容性测试

### 14.2 性能测试
**优先级**: P2  
**状态**: ❌ 未开始

#### 待开发项
- [ ] 页面加载速度测试
- [ ] 内存使用测试
- [ ] 网络请求测试

---

## 十五、部署与发布模块

### 15.1 构建配置
**优先级**: P1  
**状态**: ❌ 未开始

#### 待开发项
- [ ] 构建脚本优化
- [ ] 环境变量配置
- [ ] 打包优化

### 15.2 发布流程
**优先级**: P1  
**状态**: ✅ 部分完成

#### 功能清单
- [x] GitHub Pages发布脚本

#### 待开发项
- [ ] 自动化部署流程
- [ ] 版本管理
- [ ] 回滚机制

---

## 任务优先级说明

- **P0**: 核心功能，必须完成
- **P1**: 重要功能，优先完成
- **P2**: 优化功能，可延后完成

## 开发建议

1. **第一阶段（核心功能）**
   - 完成所有P0优先级任务
   - 确保核心业务流程可跑通
   - 完成后端API集成

2. **第二阶段（功能完善）**
   - 完成所有P1优先级任务
   - 优化用户体验
   - 完善数据管理

3. **第三阶段（优化提升）**
   - 完成P2优先级任务
   - 性能优化
   - 测试完善

---

## 更新记录

- 2025-01-06: 初始版本，完成所有页面功能模块梳理和任务拆解

